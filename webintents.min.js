__WEBINTENTS_ROOT="http://webintents.org/",function(){var a=__WEBINTENTS_ROOT,b=a+"intents.html",c=a+"picker.html",d,e=function(){};e.prototype.startActivity=function(a,b){var d=document.all?window.screenLeft:window.screenX,e=document.all?window.screenTop:window.screenY,f="directories=no,menubar=no,status=0,location=0,fullscreen=yes",h=window.open(c,"_blank",f);h.resizeTo(300,300),h.moveTo(d+40,document.body.offsetHeight+e);var i=new g(a,b);window.addEventListener("message",i.handler,!1)};var f=function(a){return JSON.stringify(a)},g=function(a,b){var c=this;this.handler=function(e){var g=JSON.parse(e.data);if(g.request&&g.request=="ready"){var h=new MessageChannel,i,j="intent."+(new Date).valueOf();a._id=j,b&&(i=[h.port2],h.port1.start(),h.port1.addEventListener("message",function(a){var c=JSON.parse(a.data);b(c.intent),h.port1.close(),h.port2.close()}),d.contentWindow.postMessage(f({request:"registerReturn",intent:a}),i,"*")),e.source.postMessage(f({request:"startActivity",intent:a}),[],"*"),window.removeEventListener("message",c.handler,!1)}}};window.addEventListener("load",function(){if(window.opener&&window.opener.closed==!1){var a=new MessageChannel;a.port1.addEventListener("message",function(a){var b=JSON.parse(a.data),c=new i;c._id=b.intent._id,c.action=b.intent.action,c.type=b.intent.type,c.data=b.intent.data,window.navigator.intents.onActivity&&window.navigator.intents.onActivity(c)},!1),a.port1.start(),a.port2.start(),window.opener.postMessage(f({request:"launched",name:window.name}),[a.port2],"*")}},!1);var h=function(a,b,c,e,g){!!c==!1&&(c=document.location.toString()),c.substring(0,7)!="http://"&&c.substring(0,8)!="https://"&&(c.substring(0,1)=="/"?c=document.location.origin+c:(path=document.location.href,path=path.substring(0,path.lastIndexOf("/")+1),c=path+c)),d.contentWindow.postMessage(f({request:"register",intent:{action:a,type:b,url:c,title:e,icon:g,domain:window.location.host}}),"*")};e.prototype.register=function(a,b){h(a,b,document.location.href,document.title,j())};var i=function(a,b,c){var e=this;this.action=a,this.type=b,this.data=c,this.postResult=function(a){var b=new i;b._id=e._id,b.action=e.action,b.data=a,d.contentWindow.postMessage(f({request:"response",intent:b}),"*")}},j=function(){var a=document.getElementsByTagName("link"),b;for(var c=0;b=a[c];c++)if((b.rel=="icon"||b.rel=="shortcut")&&!!b.href){var d=b.href;if(d.substring(0,7)=="http://"||d.substring(0,8)=="https://")return d;if(d.substring(0,1)=="/")return document.location.origin+d;path=document.location.href,path=path.substring(0,path.lastIndexOf("/")+1),d=path+d}return window.location.origin+"/favicon.ico"},k=function(){var a=document.getElementsByTagName("meta"),b;for(var c=0;b=a[c];c++){var d=b.getAttribute("name");if(d=="intent"){var e=b.getAttribute("title"),f=b.getAttribute("href"),g=b.getAttribute("content"),i=b.getAttribute("type"),k=b.getAttribute("icon")||j();h(g,i,f,e,k)}}},l=function(){var a=document.getElementsByTagName("intent"),b;for(var c=0;b=a[c];c++){var d=b.getAttribute("title"),e=b.getAttribute("href"),f=b.getAttribute("action"),g=b.getAttribute("type"),i=b.getAttribute("icon")||j();h(f,g,e,d,i)}},m=function(a){var b=a.target;if(b.method.toLowerCase()=="intent"){a.preventDefault();var c=b.action,d=b.getAttribute("enctype"),e={},f;for(var g=0;f=b.elements[g];g++)if(!!f.name){var h=f.name;if(!e[h])e[h]=f.value;else if(e[h]instanceof Array)e[h].push(f.value);else{var j=[e[h]];j.push(f.value),e[h]=j}}var k=new i(c,d,e);window.navigator.intents.startActivity(k);return!1}},n=function(){window.Intent=i,window.navigator.intents=new e,!window.postMessage||(d=document.createElement("iframe"),d.style.display="none",d.src=b,d.addEventListener("load",function(){l(),k()},!1),document.body?document.body.appendChild(d):document.addEventListener("DOMContentLoaded",function(){document.body.appendChild(d)},!1)),window.addEventListener("DOMContentReady",function(){var b=new MessageChannel;b.port1.addEventListener("message",function(){},!1),window.postMessage(f({request:"ready"}),[b.port2],a)},!1),window.addEventListener("submit",m)};n()}()